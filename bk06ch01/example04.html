<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Handling asynchronous rejection responses</title>
    </head>
    <body>
        <div id="target">
        </div>            
            
        <script>
            
            // Converts a string asynchronously to uppercase after two seconds
            function asynchronousUpperCase(str) {
                
                // Return a new Promise object
                return new Promise((resolve, reject) => {
                    
                    // Use setTimeout() to delay two seconds
                    setTimeout(() => {
                        
                        // Check that a String object was passed
                        if (typeof str === 'string') {
                            
                            // If so, resolve the promise and return the string as uppercase
                            resolve(str.toUpperCase());
                        } else {
                            
                            // If not, reject the promise and return an error message
                            reject('Input is not a string');
                        }
                    }, 2000);
                });
            }

            async function handleAsynchronous() {
                // Handle successful asynchronous results
                try {
                    // Perform the first asynchronous operation and store the result
                    const firstResult = await asynchronousUpperCase('hello');
                    console.log(`First result: ${firstResult}`);
            
                    // Perform the second asynchronous operation and store the result
                    const secondResult = await asynchronousUpperCase('world');
                    console.log(`Second result: ${secondResult}`);
            
                    // Perform the third asynchronous operation and store the result
                    // Send a number instead of a string to raise an error
                    const thirdResult = await asynchronousUpperCase(42);
                    console.log(`Third result: ${thirdResult}`);
                    
                // Handle failed asynchronous results
                } catch (error) {
                    console.log(`An error occurred: ${error}`);
                }
            }
            
            // Run it
            handleAsynchronous();
        </script>
    </body>
</html>